<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>SDM Layers · SpatialBoundaries</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../introduction/"><img src="../../assets/logo.png" alt="SpatialBoundaries logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../introduction/">SpatialBoundaries</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><span class="tocitem">Home</span><ul><li><a class="tocitem" href="../introduction/">Introduction</a></li><li><a class="tocitem" href="../../">SpatialBoundaries.jl</a></li></ul></li><li><span class="tocitem">Vignettes</span><ul><li><a class="tocitem" href="../boundaries/">Finding boundaries</a></li><li><a class="tocitem" href="../triangulation/">Triangulation wombling</a></li><li class="is-active"><a class="tocitem" href>SDM Layers</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Vignettes</a></li><li class="is-active"><a href>SDM Layers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>SDM Layers</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/EcoJulia/SpatialBoundaries.jl/blob/main/docs/src/vignettes/simplesdmlayers.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Integration-with-SimpleSDMLayers"><a class="docs-heading-anchor" href="#Integration-with-SimpleSDMLayers">Integration with SimpleSDMLayers</a><a id="Integration-with-SimpleSDMLayers-1"></a><a class="docs-heading-anchor-permalink" href="#Integration-with-SimpleSDMLayers" title="Permalink"></a></h1><p>The <code>SpatialBoundaries</code> package works really well with <code>SimpleSDMLayers</code>, so that you can (i) apply wombling and boundaries finding to a <code>SimpleSDMLayer</code> object, and (ii) convert the output of a <code>Womble</code> object to a <em>pair</em> of <code>SimpleSDMLayer</code> corresponding to the rate and direction of change.</p><pre><code class="language-julia hljs">using SimpleSDMLayers
using SpatialBoundaries
using StatsPlots</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ Warning: Package SpatialBoundaries does not have SimpleSDMLayers in its dependencies:
│ - If you have SpatialBoundaries checked out for development and have
│   added SimpleSDMLayers as a dependency but haven&#39;t updated your primary
│   environment&#39;s manifest file, try `Pkg.resolve()`.
│ - Otherwise you may need to report an issue with SpatialBoundaries
└ Loading SimpleSDMLayers into SpatialBoundaries from project dependency, future warnings for SpatialBoundaries are suppressed.</code></pre><p>Note that the warning about dependencies is a side-effect of loading some functionalities for <code>SimpleSDMLayers</code> as part of <code>SpatialBoundaries</code>, and can safely be ignored.</p><p>In this example, we will look at temperature data over North America, and measure the rate of change, as well as the direction of it. These data are extracted from the WorldClim database.</p><pre><code class="language- hljs">temperature = SimpleSDMPredictor(
    WorldClim, BioClim, 1; left=-130.0, right=-65.0, bottom=5.0, top=65.0
)</code></pre><p>We can have a look at this layer, after setting a few defaults:</p><pre><code class="language- hljs">default(; dpi=500, size=(600, 600), aspectratio=1, c=:davos, frame=:box)
plot(temperature)</code></pre><p>There is an overload of the <code>wombling</code> method for SDM layers, so we can call it directly – this method might result in a bit more memory usage than expected, as it requires to transform the <code>nothing</code> values into <code>NaN</code>s, which in turn might require to convert the inner elements of the layer grid.</p><pre><code class="language- hljs">W = wombling(temperature)</code></pre><p>By default, this returns a <code>LatticeWomble</code>. Let&#39;s look at the direction of change – mapping this information is difficult, so we will focus on the</p><pre><code class="language- hljs">stephist(
    deg2rad.(sort(vec(W.θ)));
    proj=:polar,
    lab=&quot;&quot;,
    c=:teal,
    fill=(0, 0.2, :teal),
    nbins=100,
)</code></pre><p>The values for the direction of change are concentrated around 180° - note that the direction of change is reported as a wind direction, meaning that values tend to increase on a south-north axis.</p><p>We can also map the rate of change. This is far easier to do with a proper SDM layer, so we will convert the wombling output:</p><pre><code class="language- hljs">Lr, Ld = SimpleSDMPredictor(W)</code></pre><p>Note that we do not use <code>convert</code> here, because this call returns <em>two</em> layers in a tuple – this is a slight deviation from what we expect with <code>SimpleSDMLayers</code>, but it makes the code a little easier to write, and so is considered an acceptable trade-off.</p><pre><code class="language- hljs">plot(Lr)</code></pre><p>With the <code>Ld</code> layer storing the direction of change, we <em>can</em> do a map - the main issue with mapping directions is colors, which need to have the same begin and endpoint, while remaining accessible to people with color vision defficiencies. <a href="https://www.fabiocrameri.ch/colourmaps/">Cyclic color schemes</a> work for this purpose:</p><pre><code class="language- hljs">plot(Ld, c=:brocO, clim=(0, 360))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../triangulation/">« Triangulation wombling</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Monday 4 April 2022 17:17">Monday 4 April 2022</span>. Using Julia version 1.6.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
